(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01b24e83"],{4886:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"category d-flex flex-column"},[a("div",{staticClass:"container container-main d-flex flex-grow-1"},[a("div",{staticClass:"container-inner"},[a("div",{staticClass:"products"},[a("h2",{staticClass:"title products__title text-center"},[t._v(t._s("new"===t.$route.name?t.$route.path.split("-").join(" ").toUpperCase().split("/").pop():t.$route.params.name.split("-").join(" ").toUpperCase()))]),a("div",{staticClass:"d-flex flex-wrap align-items-start justify-content-start"},t._l(t.products,function(e){return a("router-link",{key:e.id,staticClass:"product",attrs:{to:{name:t.$route.name+"-product",params:{id:e.id}},tag:"a"}},[a("transition",{attrs:{name:"show-product"}},[a("app-product",{attrs:{element:e,hoverText:t.hoverText}})],1)],1)}),1)])])])])},s=[],n=(a("ac6a"),a("7f7f"),a("cebc")),i=a("bc3a"),r=a.n(i),c=a("be6f"),l=a("2f62"),u=a("9c9e"),d={name:"category",data:function(){return{categories:"",categoryId:"",products:[],total:"",page:1,hoverText:"Подробнее",domen:"http://mersh.alef.im"}},created:function(){this.page=1,this.getCategories(),window.addEventListener("scroll",this.showVisible)},beforeDestroy:function(){this.scroll(0),window.removeEventListener("scroll",this.showVisible)},computed:Object(n["a"])({},Object(l["c"])([])),methods:{fetch:function(){var t=this;if("new"===t.$route.name)var e=t.domen+"/api/products/"+t.$route.name+"/"+t.page;else e=t.domen+"/api/products/"+t.$route.name+"/"+t.categoryId+"/"+t.page;r.a.get(e).then(function(e){console.log(e);for(var a=0;a<e.data.products.length;a++)t.products.push(e.data.products[a]);t.total=e.data.total}).catch(function(e){console.log(e),t.products=[],t.page=1,t.total=0})},showVisible:function(){var t=document.getElementsByClassName("product"),e=t[t.length-1];this.isVisible(e)&&this.page<Math.ceil(this.total/12)&&(this.page+=1,this.fetch())},getCategories:function(){var t=this;r.a.get(t.domen+"/api/info/main").then(function(e){t.categories=e.data.categories,t.getCategoryId(),t.fetch()}).catch(function(t){return console.log(t)})},getCategoryId:function(){var t=this;t.products=[],t.page=1,t.total=0,"category"===t.$route.name&&this.categories.forEach(function(e){e.name.toLowerCase()===t.$route.params.name.toLowerCase()&&(t.categoryId=e.id)})}},components:{"app-product":c["a"]},mixins:[u["c"],u["d"]]},p=d,f=(a("5b8d"),a("2877")),h=Object(f["a"])(p,o,s,!1,null,null,null);e["default"]=h.exports},"5b8d":function(t,e,a){"use strict";var o=a("f09d"),s=a.n(o);s.a},f09d:function(t,e,a){}}]);
//# sourceMappingURL=chunk-01b24e83.4f0fdb48.js.map