(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ec3a16a"],{"57af":function(t,e,a){},db05:function(t,e,a){"use strict";var s=a("57af"),i=a.n(s);i.a},e9a0:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"category search-results d-flex flex-column"},[a("div",{staticClass:"container container-main d-flex flex-grow-1"},[a("div",{staticClass:"container-inner"},[a("div",{staticClass:"products"},[a("h2",{staticClass:"search-title d-flex flex-column justify-content-center align-items-center"},[a("span",{staticClass:"search-title__subtitle"},[t._v("Результаты по запросу:")]),a("span",{staticClass:"title search-title__title text-center"},[t._v(t._s(t.searchValue))]),a("div",{staticClass:"seacr-title__quantity d-flex flex-nowrap justify-content-center align-items-end"},[a("span",{staticClass:"search-title__quantity-text"},[t._v("Найдено ")]),a("span",{staticClass:"search-title__quantity-number"},[t._v(t._s(t.total))])])]),a("div",{staticClass:"d-flex flex-wrap align-items-start justify-content-start"},t._l(t.products,function(e){return a("a",{key:e.id,staticClass:"product",on:{click:function(a){return t.routeTo(e)}}},[a("app-product",{attrs:{element:e,hoverText:t.hoverText}})],1)}),0)])])])])},i=[],n=(a("28a5"),a("ac6a"),a("7f7f"),a("cebc")),c=a("bc3a"),o=a.n(c),r=a("be6f"),l=a("2f62"),u=a("9c9e"),h={name:"search",data:function(){return{categories:[],products:[],total:"",page:1,hoverText:"Подробнее",domen:"http://localhost:8888"}},computed:Object(n["a"])({},Object(l["c"])([]),{searchValue:function(){return this.$route.params.name}}),created:function(){this.page=1,this.fetch(),this.getCategories(),window.addEventListener("scroll",this.showVisible)},beforeDestroy:function(){this.scroll(0),window.removeEventListener("scroll",this.showVisible)},methods:{fetch:function(){var t=this;o.a.get(t.domen+"/api/products/search/?s="+t.searchValue+"&page="+t.page).then(function(e){for(var a=0;a<e.data.products.length;a++)t.products.push(e.data.products[a]);t.total=e.data.total}).catch(function(e){console.log(e),t.products=[],t.page=1,t.total=0})},showVisible:function(){var t=document.getElementsByClassName("product"),e=t[t.length-1];this.isVisible(e)&&this.page<Math.ceil(this.total/12)&&(this.page+=1,this.fetch())},getCategories:function(){var t=this;o.a.get(t.domen+"/api/info/main").then(function(e){t.categories=e.data.categories}).catch(function(t){console.log(t)})},routeTo:function(t){var e;this.categories.forEach(function(a){if(a.id===t.category_id)return e=a.name}),this.$router.push({name:"category-product",params:{name:e.split(" ").join("-").toLowerCase(),id:t.id}})}},watch:{searchValue:function(){this.products=[],this.page=1,this.fetch()}},components:{"app-product":r["a"]},mixins:[u["c"],u["d"]]},d=h,f=(a("db05"),a("2877")),p=Object(f["a"])(d,s,i,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-0ec3a16a.c999bede.js.map