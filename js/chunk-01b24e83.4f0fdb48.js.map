{"version":3,"sources":["webpack:///./src/views/Category.vue?301e","webpack:///src/views/Category.vue","webpack:///./src/views/Category.vue?26e4","webpack:///./src/views/Category.vue","webpack:///./src/views/Category.vue?b194"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$route","name","path","split","join","toUpperCase","pop","params","_l","product","key","id","attrs","to","tag","element","hoverText","staticRenderFns","Categoryvue_type_script_lang_js_","data","categories","categoryId","products","total","page","domen","created","getCategories","window","addEventListener","showVisible","beforeDestroy","scroll","removeEventListener","computed","Object","objectSpread","vuex_esm","methods","fetch","context","axios_default","a","get","then","res","console","log","i","length","push","catch","error","elements","document","getElementsByClassName","secondToLastElement","isVisible","Math","ceil","getCategoryId","forEach","elem","toLowerCase","components","app-product","Product","mixins","views_Categoryvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Category_vue_vue_type_style_index_0_lang_sass___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_9_oneOf_1_0_node_modules_css_loader_index_js_ref_9_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_9_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_9_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Category_vue_vue_type_style_index_0_lang_sass___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-01b24e83.4f0fdb48.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"category d-flex flex-column\"},[_c('div',{staticClass:\"container container-main d-flex flex-grow-1\"},[_c('div',{staticClass:\"container-inner\"},[_c('div',{staticClass:\"products\"},[_c('h2',{staticClass:\"title products__title text-center\"},[_vm._v(_vm._s(_vm.$route.name === 'new' ? _vm.$route.path.split('-').join(' ').toUpperCase().split('/').pop() : _vm.$route.params.name.split('-').join(' ').toUpperCase()))]),_c('div',{staticClass:\"d-flex flex-wrap align-items-start justify-content-start\"},_vm._l((_vm.products),function(product){return _c('router-link',{key:product.id,staticClass:\"product\",attrs:{\"to\":{name: _vm.$route.name + '-product', params: { id: product.id }},\"tag\":\"a\"}},[_c('transition',{attrs:{\"name\":\"show-product\"}},[_c('app-product',{attrs:{\"element\":product,\"hoverText\":_vm.hoverText}})],1)],1)}),1)])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"category d-flex flex-column\">\n\n    <div class=\"container container-main d-flex flex-grow-1\">\n      <div class=\"container-inner\">\n\n        <div class=\"products\">\n          <h2 class=\"title products__title text-center\">{{ $route.name === 'new' ? $route.path.split('-').join(' ').toUpperCase().split('/').pop() : $route.params.name.split('-').join(' ').toUpperCase() }}</h2>\n          <div class=\"d-flex flex-wrap align-items-start justify-content-start\">\n            <router-link class=\"product\"\n              :to=\"{name: $route.name + '-product', params: { id: product.id }}\"\n              tag=\"a\"\n              v-for=\"product in products\"\n              v-bind:key=\"product.id\">\n              <transition name=\"show-product\">\n                <app-product\n                  :element=\"product\"\n                  :hoverText=\"hoverText\">\n                </app-product>\n              </transition>\n            </router-link>\n           </div>\n        </div>\n\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport Product from '@/components/Product.vue'\nimport { mapGetters } from 'vuex'\nimport { scrollMixin, visible } from '@/mixins'\n\nexport default {\n  name: 'category',\n  data () {\n    return {\n      categories: '',\n      categoryId: '',\n      products: [],\n      total: '',\n      page: 1,\n      hoverText: 'Подробнее',\n      domen: process.env.VUE_APP_DOMEN\n    }\n  },\n  created () {\n    this.page = 1\n    this.getCategories()\n    window.addEventListener('scroll', this.showVisible)\n  },\n  beforeDestroy () {\n    this.scroll(0)\n    window.removeEventListener('scroll', this.showVisible)\n  },\n  computed: {\n    ...mapGetters([\n      // 'products'\n    ])\n  },\n  methods: {\n    fetch () {\n      var context = this\n      if (context.$route.name === 'new') {\n        var path = context.domen + '/api/products/' + context.$route.name + '/' + context.page\n      } else {\n        var path = context.domen + '/api/products/' + context.$route.name + '/' + context.categoryId + '/' + context.page\n      }\n      axios.get(path)\n        .then(res => {\n          console.log(res)\n          // context.products = res.data.products\n          for (let i = 0; i < res.data.products.length; i++) {\n            context.products.push(res.data.products[i])\n          }\n          context.total = res.data.total\n        })\n        .catch(error => {\n          console.log(error)\n          context.products = []\n          context.page = 1\n          context.total = 0\n        })\n    },\n    showVisible () {\n      var elements = document.getElementsByClassName('product')\n      var secondToLastElement = elements[elements.length - 1]\n      if (this.isVisible(secondToLastElement) && this.page < Math.ceil(this.total / 12)) {\n        this.page += 1\n        this.fetch()\n      }\n    },\n    getCategories () {\n      var context = this\n\n      axios.get(context.domen + '/api/info/main')\n        .then(res => {\n          // console.log(res)\n          context.categories = res.data.categories\n          context.getCategoryId()\n          context.fetch()\n        })\n        .catch(error => console.log(error))\n    },\n    getCategoryId () {\n      var context = this\n      context.products = []\n      context.page = 1\n      context.total = 0\n\n      if (context.$route.name === 'category') {\n        this.categories.forEach( function (elem) {\n          if (elem.name.toLowerCase() === context.$route.params.name.toLowerCase()) {\n            context.categoryId = elem.id\n          }\n        })\n      }\n\n    }\n  },\n  components: {\n    'app-product': Product\n  },\n  mixins: [scrollMixin, visible]\n}\n</script>\n\n<style lang=\"sass\">\n@import '@/sass/_variables.sass'\n.category\n  .container-inner\n    // padding-top: 25px\n    // padding-bottom: 69px\n    padding-top: 1.302vw\n    padding-bottom: 3.594vw\n\n.products__title\n  // margin-bottom: 67px\n  // margin-top: 67px\n  margin-bottom: 3.490vw\n  margin-top: 3.490vw\n\n.show-product-enter-active,\n.show-product-leave-active\n  transition: opacity .5s\n\n.show-product-enter,\n.show-product-leave-to\n  opacity: 0\n\n@media(max-width: 1199px)\n  .category\n    .container-inner\n      padding-top: calc(25px / #{$lose-m})\n      padding-bottom: calc(69px / #{$lose-m})\n\n  .products__title\n    margin-bottom: calc(67px / #{$lose-m})\n    margin-top: calc(67px / #{$lose-m})\n\n@media(max-width: 991px)\n  .category\n    .container-inner\n      padding-top: calc(25px / #{$lose-s})\n      padding-bottom: calc(69px / #{$lose-s})\n\n  .products__title\n    margin-bottom: calc(67px / #{$lose-s})\n    margin-top: calc(67px / #{$lose-s})\n\n@media(max-width: 767px)\n  .category\n    .container-inner\n      padding-top: calc(25px / #{$lose-xs})\n      padding-bottom: calc(69px / #{$lose-xs})\n\n  .products__title\n    margin-bottom: calc(67px / #{$lose-xs})\n    margin-top: calc(67px / #{$lose-xs})\n\n@media(max-width: 575px)\n  .category\n    .container-main\n      padding-left: 0\n      padding-right: 0\n    .container-inner\n      padding-top: calc(1.302vw * #{$gain-m})\n      padding-bottom: calc(3.594vw * #{$gain-m})\n      padding-left: 15px\n      padding-right: 15px\n\n  .products__title\n    margin-bottom: calc(3.490vw * #{$gain-m})\n    margin-top: calc(3.490vw * #{$gain-m})\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Category.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Category.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Category.vue?vue&type=template&id=638f75ec&\"\nimport script from \"./Category.vue?vue&type=script&lang=js&\"\nexport * from \"./Category.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Category.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Category.vue?vue&type=style&index=0&lang=sass&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/index.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Category.vue?vue&type=style&index=0&lang=sass&\""],"sourceRoot":""}