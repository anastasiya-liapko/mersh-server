{"remainingRequest":"/Users/anastasia/Documents/job/vue/mersh/node_modules/babel-loader/lib/index.js!/Users/anastasia/Documents/job/vue/mersh/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/anastasia/Documents/job/vue/mersh/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anastasia/Documents/job/vue/mersh/src/components/PopupOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/anastasia/Documents/job/vue/mersh/src/components/PopupOrder.vue","mtime":1562940874397},{"path":"/Users/anastasia/Documents/job/vue/mersh/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anastasia/Documents/job/vue/mersh/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/anastasia/Documents/job/vue/mersh/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anastasia/Documents/job/vue/mersh/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport VueRecaptcha from 'vue-recaptcha';\nimport { required, minLength, email, requiredUnless } from 'vuelidate/lib/validators';\nimport AwesomeMask from 'awesome-mask';\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      id: 'js-order',\n      data: {\n        name: '',\n        phone: '',\n        email: '',\n        message: '',\n        recaptchaToken: ''\n      },\n      message: 'Отправить',\n      sitekey: process.env.VUE_APP_RECAPTCHA_TOKEN,\n      recaptcha: false\n    };\n  },\n  mounted: function mounted() {\n    var self = this;\n    $('#' + this.id).on('hidden.bs.modal', function () {\n      self.resetForm();\n    }); // $('#' + this.id).on('show.bs.modal', function () {\n    //   setTimeout(function () {\n    //     document.querySelector('.popup input').focus()\n    //   }, 400)\n    // })\n  },\n  validations: {\n    data: {\n      name: {\n        required: required\n      },\n      phone: {\n        required: requiredUnless('email'),\n        minLength: minLength(18)\n      },\n      email: {\n        required: requiredUnless('phone'),\n        email: email\n      },\n      message: {\n        required: required\n      }\n    }\n  },\n  methods: {\n    resetForm: function resetForm() {\n      var self = this;\n      Object.keys(self.data).forEach(function (key, index) {\n        self.data[key] = '';\n      });\n      self.$v.$reset();\n    },\n    showMessage: function showMessage(value) {\n      var button = document.querySelector('.order .button_submit');\n\n      if (!value) {\n        button.classList.add('error');\n      } else {\n        button.classList.add('success');\n      }\n\n      setTimeout(function () {\n        button.classList.remove('error');\n        button.classList.remove('success');\n      }, 1200);\n    },\n    register: function register(recaptchaToken) {\n      this.recaptcha = true;\n      this.data.recaptchaToken = recaptchaToken;\n    },\n    submit: function submit() {\n      var self = this;\n      axios.post('/post.php', self.data).then(function (response) {\n        console.log(response);\n        self.showMessage(1);\n        self.resetForm();\n        self.$refs.recaptcha.reset();\n        self.recaptcha = false;\n      }).catch(function (error) {\n        console.log(error);\n        self.showMessage(0);\n      });\n    },\n    onCaptchaExpired: function onCaptchaExpired() {\n      this.$refs.recaptcha.reset();\n      this.recaptcha = false;\n    }\n  },\n  directives: {\n    'mask': AwesomeMask\n  },\n  components: {\n    'vue-recaptcha': VueRecaptcha\n  }\n};",{"version":3,"sources":["PopupOrder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA,OAAA,YAAA,MAAA,eAAA;AACA,SAAA,QAAA,EAAA,SAAA,EAAA,KAAA,EAAA,cAAA,QAAA,0BAAA;AACA,OAAA,WAAA,MAAA,cAAA;AACA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,EAAA,EAAA,UADA;AAEA,MAAA,IAAA,EAAA;AACA,QAAA,IAAA,EAAA,EADA;AAEA,QAAA,KAAA,EAAA,EAFA;AAGA,QAAA,KAAA,EAAA,EAHA;AAIA,QAAA,OAAA,EAAA,EAJA;AAKA,QAAA,cAAA,EAAA;AALA,OAFA;AASA,MAAA,OAAA,EAAA,WATA;AAUA,MAAA,OAAA,EAAA,OAAA,CAAA,GAAA,CAAA,uBAVA;AAWA,MAAA,SAAA,EAAA;AAXA,KAAA;AAaA,GAfA;AAgBA,EAAA,OAhBA,qBAgBA;AACA,QAAA,IAAA,GAAA,IAAA;AACA,IAAA,CAAA,CAAA,MAAA,KAAA,EAAA,CAAA,CAAA,EAAA,CAAA,iBAAA,EAAA,YAAA;AACA,MAAA,IAAA,CAAA,SAAA;AACA,KAFA,EAFA,CAKA;AACA;AACA;AACA;AACA;AACA,GA1BA;AA2BA,EAAA,WAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,QAAA,EAAA;AADA,OADA;AAIA,MAAA,KAAA,EAAA;AACA,QAAA,QAAA,EAAA,cAAA,CAAA,OAAA,CADA;AAEA,QAAA,SAAA,EAAA,SAAA,CAAA,EAAA;AAFA,OAJA;AAQA,MAAA,KAAA,EAAA;AACA,QAAA,QAAA,EAAA,cAAA,CAAA,OAAA,CADA;AAEA,QAAA,KAAA,EAAA;AAFA,OARA;AAYA,MAAA,OAAA,EAAA;AACA,QAAA,QAAA,EAAA;AADA;AAZA;AADA,GA3BA;AA6CA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,MAAA,MAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,EAAA,OAAA,CAAA,UAAA,GAAA,EAAA,KAAA,EAAA;AACA,QAAA,IAAA,CAAA,IAAA,CAAA,GAAA,IAAA,EAAA;AACA,OAFA;AAGA,MAAA,IAAA,CAAA,EAAA,CAAA,MAAA;AACA,KAPA;AAQA,IAAA,WARA,uBAQA,KARA,EAQA;AACA,UAAA,MAAA,GAAA,QAAA,CAAA,aAAA,CAAA,uBAAA,CAAA;;AACA,UAAA,CAAA,KAAA,EAAA;AACA,QAAA,MAAA,CAAA,SAAA,CAAA,GAAA,CAAA,OAAA;AACA,OAFA,MAEA;AACA,QAAA,MAAA,CAAA,SAAA,CAAA,GAAA,CAAA,SAAA;AACA;;AACA,MAAA,UAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,SAAA,CAAA,MAAA,CAAA,OAAA;AACA,QAAA,MAAA,CAAA,SAAA,CAAA,MAAA,CAAA,SAAA;AACA,OAHA,EAGA,IAHA,CAAA;AAIA,KAnBA;AAoBA,IAAA,QApBA,oBAoBA,cApBA,EAoBA;AACA,WAAA,SAAA,GAAA,IAAA;AACA,WAAA,IAAA,CAAA,cAAA,GAAA,cAAA;AACA,KAvBA;AAwBA,IAAA,MAxBA,oBAwBA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,MAAA,KAAA,CAAA,IAAA,CAAA,WAAA,EAAA,IAAA,CAAA,IAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,QAAA,IAAA,CAAA,WAAA,CAAA,CAAA;AACA,QAAA,IAAA,CAAA,SAAA;AACA,QAAA,IAAA,CAAA,KAAA,CAAA,SAAA,CAAA,KAAA;AACA,QAAA,IAAA,CAAA,SAAA,GAAA,KAAA;AACA,OAPA,EAQA,KARA,CAQA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,QAAA,IAAA,CAAA,WAAA,CAAA,CAAA;AACA,OAXA;AAYA,KAtCA;AAuCA,IAAA,gBAvCA,8BAuCA;AACA,WAAA,KAAA,CAAA,SAAA,CAAA,KAAA;AACA,WAAA,SAAA,GAAA,KAAA;AACA;AA1CA,GA7CA;AAyFA,EAAA,UAAA,EAAA;AACA,YAAA;AADA,GAzFA;AA4FA,EAAA,UAAA,EAAA;AACA,qBAAA;AADA;AA5FA,CAAA","sourcesContent":["<template>\n  <div class=\"popup order modal fade\"\n    :id=\"id\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n      <div class=\"modal-content\">\n        <button type=\"button\" class=\"close d-flex align-items-center justify-content-center\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span class=\"icon-close d-flex align-items-center justify-content-center\" aria-hidden=\"true\"></span>\n        </button>\n        <form class=\"popup-form d-flex flex-column align-items-center justify-content-center\">\n          <h2 class=\"popup-form__title\">Изготовление на заказ</h2>\n\n          <div class=\"popup-form__field d-flex flex-wrap align-items-center justify-content-between\">\n            <label class=\"popup-form__label mb-0\">Имя</label>\n            <input class=\"popup-form__input\"\n              :class=\"{invalid: $v.data.name.$error}\"\n              type=\"text\"\n              name=\"name\"\n              placeholder=\"Иван Петров\"\n              @blur=\"$v.data.name.$touch()\"\n              v-model=\"data.name\">\n            <p class=\"popup-form__error-text\"\n              v-if=\"$v.data.name.$error\">Укажите имя</p>\n          </div>\n\n          <div class=\"popup-form__field d-flex flex-wrap align-items-center justify-content-between\">\n            <label class=\"popup-form__label mb-0\">Телефон</label>\n            <input class=\"popup-form__input\"\n              :class=\"{invalid: $v.data.phone.$error}\"\n              type=\"text\"\n              name=\"phone\"\n              placeholder=\"+ 7 (ххх) ххх хх хх\"\n              v-mask=\"'+9 (999) 999-99-99'\"\n              @blur=\"$v.data.phone.$touch()\"\n              v-model=\"data.phone\">\n            <transition name=\"fade\">\n              <p class=\"popup-form__error-text\"\n                v-if=\"!$v.data.phone.required && $v.data.phone.$dirty\">\n                Укажите телефон или email\n              </p>\n              <p class=\"popup-form__error-text\"\n                v-if=\"!$v.data.phone.minLength\">\n                Введите телефон в формате + 7 (ххх) ххх хх хх\n              </p>\n            </transition>\n          </div>\n\n          <div class=\"popup-form__field d-flex flex-wrap align-items-center justify-content-between\">\n            <label class=\"popup-form__label mb-0\">Email</label>\n            <input class=\"popup-form__input\"\n              :class=\"{invalid: $v.data.email.$error}\"\n              type=\"text\"\n              name=\"email\"\n              placeholder=\"mersh@site.com\"\n              @blur=\"$v.data.email.$touch()\"\n              v-model=\"data.email\">\n            <transition name=\"fade\">\n              <p class=\"popup-form__error-text\"\n                v-if=\"!$v.data.email.required && $v.data.email.$dirty\">\n                Укажите телефон или email\n              </p>\n              <p class=\"popup-form__error-text\"\n                v-if=\"!$v.data.email.email\">\n                Введите email в формате mersh@site.com\n              </p>\n            </transition>\n          </div>\n\n          <div class=\"popup-form__field d-flex flex-wrap align-items-center justify-content-between\">\n            <label class=\"popup-form__label mb-0\">Сообщение</label>\n            <textarea class=\"popup-form__textarea\"\n              :class=\"{invalid: $v.data.message.$error}\"\n              type=\"text\"\n              name=\"message\"\n              placeholder=\"Текст\"\n              @blur=\"$v.data.message.$touch()\"\n              v-model=\"data.message\"></textarea>\n            <transition name=\"fade\">\n              <p class=\"popup-form__error-text\"\n                v-if=\"$v.data.message.$error\">\n                Укажите сообщение\n              </p>\n            </transition>\n          </div>\n\n          <vue-recaptcha\n            class=\"recaptcha\"\n            ref=\"recaptcha\"\n            :sitekey=\"sitekey\"\n            @verify=\"register\"\n            @expired=\"onCaptchaExpired\"\n          />\n\n          <button\n              class=\"popup-form__submit button button_form button_submit d-flex align-items-center justify-content-center\"\n              data-success=\"Отправлено!\"\n              data-error=\"Ошибка!\"\n              @click.prevent=\"submit\"\n              :disabled=\"$v.$invalid || !recaptcha\">\n              <span>{{ message }}</span>\n          </button>\n\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport VueRecaptcha from 'vue-recaptcha'\nimport { required, minLength, email, requiredUnless } from 'vuelidate/lib/validators'\nimport AwesomeMask from 'awesome-mask'\nimport axios from 'axios'\n\nexport default {\n  data () {\n    return {\n      id: 'js-order',\n      data: {\n        name: '',\n        phone: '',\n        email: '',\n        message: '',\n        recaptchaToken: ''\n      },\n      message: 'Отправить',\n      sitekey: process.env.VUE_APP_RECAPTCHA_TOKEN,\n      recaptcha: false\n    }\n  },\n  mounted () {\n    var self = this\n    $('#' + this.id).on('hidden.bs.modal', function () {\n      self.resetForm()\n    })\n    // $('#' + this.id).on('show.bs.modal', function () {\n    //   setTimeout(function () {\n    //     document.querySelector('.popup input').focus()\n    //   }, 400)\n    // })\n  },\n  validations: {\n    data: {\n      name: {\n        required\n      },\n      phone: {\n        required: requiredUnless('email'),\n        minLength: minLength(18)\n      },\n      email: {\n        required: requiredUnless('phone'),\n        email\n      },\n      message: {\n        required\n      }\n    }\n  },\n  methods: {\n    resetForm () {\n      var self = this\n      Object.keys(self.data).forEach(function (key, index) {\n        self.data[key] = ''\n      })\n      self.$v.$reset()\n    },\n    showMessage (value) {\n      var button = document.querySelector('.order .button_submit')\n      if (!value) {\n        button.classList.add('error')\n      } else {\n        button.classList.add('success')\n      }\n      setTimeout(function () {\n        button.classList.remove('error')\n        button.classList.remove('success')\n      }, 1200)\n    },\n    register (recaptchaToken) {\n      this.recaptcha = true\n      this.data.recaptchaToken = recaptchaToken\n    },\n    submit () {\n      var self = this\n      axios.post('/post.php', self.data)\n        .then(function (response) {\n          console.log(response)\n          self.showMessage(1)\n          self.resetForm()\n          self.$refs.recaptcha.reset()\n          self.recaptcha = false\n        })\n        .catch(function (error) {\n          console.log(error)\n          self.showMessage(0)\n        })\n    },\n    onCaptchaExpired () {\n      this.$refs.recaptcha.reset()\n      this.recaptcha = false\n    }\n  },\n  directives: {\n    'mask': AwesomeMask\n  },\n  components: {\n    'vue-recaptcha': VueRecaptcha\n  }\n}\n</script>\n\n<style lang=\"sass\">\n@import '@/sass/_variables.sass'\n.order\n  .popup-form__submit\n    // margin-top: 25px\n    margin-top: 1.302vw\n\n@media(max-width: 1199px)\n  .order\n    .popup-form__submit\n      margin-top: calc(1.302vw * #{$gain-m} / 7)\n\n@media(max-width: 575px)\n  .order\n    .popup-form__submit\n      margin-top: calc(1.302vw * #{$gain-xs} / 7)\n\n// // calc from viewport width 767px\n// @media(max-width: 575px)\n//   .order\n//     .popup-form__submit\n//       // margin-top: 25px\n//       margin-top: calc(3.259vw / 7)\n//     .recaptcha\n//       // margin-top: 25px\n//       margin-top: calc(3.259vw / 7)\n</style>\n"],"sourceRoot":"src/components"}]}