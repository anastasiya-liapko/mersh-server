{"remainingRequest":"/Users/anastasia/Documents/job/vue/mersh/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anastasia/Documents/job/vue/mersh/src/components/PopupPreview.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/anastasia/Documents/job/vue/mersh/src/components/PopupPreview.vue","mtime":1562763646507},{"path":"/Users/anastasia/Documents/job/vue/mersh/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anastasia/Documents/job/vue/mersh/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/anastasia/Documents/job/vue/mersh/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anastasia/Documents/job/vue/mersh/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Slick from 'vue-slick'\n\nexport default {\n  data () {\n    return {\n      id: 'js-preview',\n      showMute: true\n    }\n  },\n  props: ['product', 'options'],\n  mounted () {\n    var self = this\n    $('#' + this.id).on('shown.bs.modal', function () {\n      self.$refs.slick.reSlick()\n    })\n  },\n  methods : {\n    handleBeforeChange (event, slick, currentSlide, nextSlide) {\n      if (slick.$slides[currentSlide].querySelector('video')) {\n        slick.$slides[currentSlide].querySelector('video').muted = true\n        slick.$slides[currentSlide].querySelector('video').pause()\n        this.showMute = true\n      }\n\n      if (slick.$slides[nextSlide].querySelector('video')) {\n        slick.$slides[nextSlide].querySelector('video').currentTime = 0;\n        slick.$slides[nextSlide].querySelector('video').play()\n      }\n    },\n    handleInit (event, slick) {\n      this.$refs.slick.reSlick()\n      var video = document.querySelector('.slick-current video')\n      video ? video.play() : ''\n    }\n  },\n  watch: {\n    showMute: function () {\n      var video = document.querySelector('.slick-active video')\n      if (video) {\n        this.showMute ? video.muted = true : video.muted = false\n      }\n    },\n    options: function () {\n      this.$refs.slick.reSlick()\n    }\n  },\n  components: {\n    'app-slick': Slick\n  }\n}\n",{"version":3,"sources":["PopupPreview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PopupPreview.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"popup preview modal fade\"\n    :id=\"id\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n      <div class=\"modal-content\">\n        <button type=\"button\" class=\"close d-flex align-items-center justify-content-center\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span class=\"icon-close d-flex align-items-center justify-content-center\" aria-hidden=\"true\"></span>\n        </button>\n\n        <app-slick class=\"product-slider\"\n          ref=\"slick\"\n          :options=\"options\"\n          @beforeChange=\"handleBeforeChange\">\n          <div\n            class=\"position-relative\"\n            v-for=\"image in product.images\"\n            v-bind:key=\"image.id\">\n          <div>\n            <a>\n              <video\n                v-if=\"image.type === 'video'\"\n                muted=\"muted\"\n                loop=\"loop\"\n                preload=\"auto\"\n                width=\"100%\"\n                autoplay=\"autoplay\">\n                <source\n                  :src=\"image.link\"\n                  type='video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"'>\n                Тег video не поддерживается вашим браузером.\n              </video>\n              <img\n                v-if=\"image.type === 'image'\"\n                :src=\"image.link\"\n                alt=\"\">\n            </a>\n            </div>\n            <i\n              class=\"product-slider__sound fas fa-volume-mute d-flex align-items-center justify-content-start\"\n              v-if=\"image.type === 'video' && showMute\"\n              @click=\"showMute = !showMute\">\n            </i>\n            <i\n              class=\"product-slider__sound fas fa-volume-up d-flex align-items-center justify-content-start\"\n              v-if=\"image.type === 'video' && !showMute\"\n              @click=\"showMute = !showMute\">\n            </i>\n          </div>\n        </app-slick>\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Slick from 'vue-slick'\n\nexport default {\n  data () {\n    return {\n      id: 'js-preview',\n      showMute: true\n    }\n  },\n  props: ['product', 'options'],\n  mounted () {\n    var self = this\n    $('#' + this.id).on('shown.bs.modal', function () {\n      self.$refs.slick.reSlick()\n    })\n  },\n  methods : {\n    handleBeforeChange (event, slick, currentSlide, nextSlide) {\n      if (slick.$slides[currentSlide].querySelector('video')) {\n        slick.$slides[currentSlide].querySelector('video').muted = true\n        slick.$slides[currentSlide].querySelector('video').pause()\n        this.showMute = true\n      }\n\n      if (slick.$slides[nextSlide].querySelector('video')) {\n        slick.$slides[nextSlide].querySelector('video').currentTime = 0;\n        slick.$slides[nextSlide].querySelector('video').play()\n      }\n    },\n    handleInit (event, slick) {\n      this.$refs.slick.reSlick()\n      var video = document.querySelector('.slick-current video')\n      video ? video.play() : ''\n    }\n  },\n  watch: {\n    showMute: function () {\n      var video = document.querySelector('.slick-active video')\n      if (video) {\n        this.showMute ? video.muted = true : video.muted = false\n      }\n    },\n    options: function () {\n      this.$refs.slick.reSlick()\n    }\n  },\n  components: {\n    'app-slick': Slick\n  }\n}\n</script>\n\n<style lang=\"sass\">\n@import '@/sass/_variables.sass'\n.preview\n  display: block\n  pointer-events: none !important\n  .modal-dialog\n    max-width: 100%\n    width: 100%\n    max-height: 100vh\n    margin: 0\n  .modal-content\n    display: flex\n    justify-content: center\n    pointer-events: none !important\n    max-width: 100%\n    width: 100%\n    max-height: 100vh\n    height: 100vh\n    padding: 0\n    background-color: $color-popup-overlay\n    img,\n    video\n      width: 100vw\n      height: 100vh\n      margin: 0 auto\n      object-fit: contain\n  .slick-slider\n    height: 100vh\n  &.show\n    pointer-events: auto !important\n    .modal-content\n      pointer-events: auto !important\n</style>\n"]}]}