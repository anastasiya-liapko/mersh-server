{"remainingRequest":"/Users/anastasia/Documents/job/vue/mersh/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anastasia/Documents/job/vue/mersh/src/views/Product.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/anastasia/Documents/job/vue/mersh/src/views/Product.vue","mtime":1562737917755},{"path":"/Users/anastasia/Documents/job/vue/mersh/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anastasia/Documents/job/vue/mersh/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/anastasia/Documents/job/vue/mersh/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anastasia/Documents/job/vue/mersh/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters, mapActions } from 'vuex'\nimport { required } from 'vuelidate/lib/validators'\nimport Select from '@/components/Select.vue'\nimport Slick from 'vue-slick'\n\nexport default {\n  name: 'product',\n  data () {\n    return {\n      product: '',\n      touchVariants: false,\n      variant: '',\n      quantity: 1,\n      slickOptions: {\n        slidesToShow: 1,\n        dots: true\n      },\n      showMute: true\n    }\n  },\n  created () {\n    var self = this\n    var id = this.$router.currentRoute.params.id\n    this.products.forEach(function (elem, i) {\n      if (elem.id === parseInt(id)) {\n        self.product = elem\n      }\n    })\n  },\n  computed: {\n    ...mapGetters([\n      'products',\n      'selectName',\n      'selectShow'\n    ])\n  },\n  validations: {\n    variant: {\n      required\n    }\n  },\n  methods: {\n    ...mapActions([\n      'filterSelect',\n      'resetSelect',\n      'addToCart',\n      'removeFromCart'\n    ]),\n    select (value) {\n      this.variant = value[1].name\n      this.touchVariants = true\n    },\n    submit () {\n      var item = this.product\n      item.variant = this.variant\n      item.quantity = this.quantity\n      this.touchVariants = true\n      if (!this.$v.$invalid || this.product.variants === undefined) {\n        this.addToCart(item)\n      }\n    },\n    handleBeforeChange (event, slick, currentSlide, nextSlide) {\n      if (slick.$slides[currentSlide].querySelector('video')) {\n        slick.$slides[currentSlide].querySelector('video').muted = true\n        slick.$slides[currentSlide].querySelector('video').pause()\n        this.showMute = true\n      }\n\n      if (slick.$slides[nextSlide].querySelector('video')) {\n        slick.$slides[nextSlide].querySelector('video').currentTime = 0;\n        slick.$slides[nextSlide].querySelector('video').play()\n      }\n    }\n  },\n  watch: {\n    showMute: function () {\n      var video = document.querySelector('.slick-active video')\n      if (video) {\n        this.showMute ? video.muted = true : video.muted = false\n      }\n    }\n  },\n  components: {\n    'app-select': Select,\n    'app-slick': Slick\n  }\n}\n",{"version":3,"sources":["Product.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Product.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"page-product d-flex flex-column\">\n    <div class=\"container container-main d-flex flex-grow-1\">\n      <div class=\"container-inner\">\n        <h2 class=\"title page-product__title text-center\">{{ product.name }}</h2>\n        <router-link class=\"page-product__category d-block text-center\"\n          :to=\"{name: 'category', params: {name: $route.params.name}}\"\n          tag=\"a\">\n          {{ $route.params.name }}\n        </router-link>\n\n        <div class=\"page-product__slider\">\n          <app-slick ref=\"slick\"\n            :options=\"slickOptions\"\n            @beforeChange=\"handleBeforeChange\">\n            <div class=\"position-relative\"\n              v-for=\"image in product.images\"\n              v-bind:key=\"image.id\">\n            <a :href=\"image.link\">\n              <video v-if=\"image.type === 'video'\" muted=\"muted\" loop=\"loop\" preload=\"auto\" width=\"100%\">\n                <source :src=\"image.link\" type='video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"'>\n                Тег video не поддерживается вашим браузером.\n              </video>\n              <img v-if=\"image.type === 'image'\" :src=\"image.link\" alt=\"\">\n            </a>\n            <i class=\"page-product__slider-sound fas fa-volume-mute d-flex align-items-center justify-content-start\"\n              v-if=\"image.type === 'video' && showMute\"\n              @click=\"showMute = !showMute\">\n            </i>\n            <i class=\"page-product__slider-sound fas fa-volume-up d-flex align-items-center justify-content-start\"\n              v-if=\"image.type === 'video' && !showMute\"\n              @click=\"showMute = !showMute\">\n            </i>\n            </div>\n          </app-slick>\n        </div>\n\n        <div class=\"d-flex flex-column flex-sm-row justify-content-between\">\n          <div class=\"page-product__descr order-2 order-sm-1\">\n            <p class=\"subtitle privacy__subtitle page-product__subtitle\">{{ product.subtitle }}</p>\n            <p class=\"text privacy__text page-product__text\">{{ product.text }}</p>\n          </div>\n          <form class=\"page-product__form order-1 order-sm-2 d-flex flex-column align-items-center\">\n            <h2 class=\"title page-product__form-title text-right w-100\">{{ product.price }} P.</h2>\n\n            <div class=\"page-product__select-wrapper select-wrapper d-flex flex-wrap align-items-center justify-content-between w-100\"\n              :class=\"{invalid: !$v.variant.required && $v.variant.$invalid && touchVariants}\"\n              v-if=\"product.variants\">\n              <app-select\n                class=\"page-product__select select select_type_product\"\n                :show=\"selectShow && selectName === 'variant'\"\n                :name=\"'variant'\"\n                :placeholder=\"'Вариант номер 1'\"\n                :options=\"product.variants\"\n                :selected=\"variant\"\n                v-on:updateOption=\"select\">\n              </app-select>\n              <transition name=\"fade\">\n                <p class=\"page-product__error-text page-product__error-text_type_select\"\n                  v-if=\"!$v.variant.required && $v.variant.$invalid && touchVariants\">\n                  Укажите значение атрибута\n                </p>\n              </transition>\n            </div>\n\n            <button class=\"page-product__submit button button_form button_form-page button_submit\"\n              @click.prevent=\"submit\"\n              :data-toggle=\"!$v.$invalid || !product.variants ? 'modal' : ''\"\n              :data-target=\"!$v.$invalid || !product.variants ? '#js-success' : ''\">\n              <span class=\"button_submit-text\">В корзину</span>\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport { required } from 'vuelidate/lib/validators'\nimport Select from '@/components/Select.vue'\nimport Slick from 'vue-slick'\n\nexport default {\n  name: 'product',\n  data () {\n    return {\n      product: '',\n      touchVariants: false,\n      variant: '',\n      quantity: 1,\n      slickOptions: {\n        slidesToShow: 1,\n        dots: true\n      },\n      showMute: true\n    }\n  },\n  created () {\n    var self = this\n    var id = this.$router.currentRoute.params.id\n    this.products.forEach(function (elem, i) {\n      if (elem.id === parseInt(id)) {\n        self.product = elem\n      }\n    })\n  },\n  computed: {\n    ...mapGetters([\n      'products',\n      'selectName',\n      'selectShow'\n    ])\n  },\n  validations: {\n    variant: {\n      required\n    }\n  },\n  methods: {\n    ...mapActions([\n      'filterSelect',\n      'resetSelect',\n      'addToCart',\n      'removeFromCart'\n    ]),\n    select (value) {\n      this.variant = value[1].name\n      this.touchVariants = true\n    },\n    submit () {\n      var item = this.product\n      item.variant = this.variant\n      item.quantity = this.quantity\n      this.touchVariants = true\n      if (!this.$v.$invalid || this.product.variants === undefined) {\n        this.addToCart(item)\n      }\n    },\n    handleBeforeChange (event, slick, currentSlide, nextSlide) {\n      if (slick.$slides[currentSlide].querySelector('video')) {\n        slick.$slides[currentSlide].querySelector('video').muted = true\n        slick.$slides[currentSlide].querySelector('video').pause()\n        this.showMute = true\n      }\n\n      if (slick.$slides[nextSlide].querySelector('video')) {\n        slick.$slides[nextSlide].querySelector('video').currentTime = 0;\n        slick.$slides[nextSlide].querySelector('video').play()\n      }\n    }\n  },\n  watch: {\n    showMute: function () {\n      var video = document.querySelector('.slick-active video')\n      if (video) {\n        this.showMute ? video.muted = true : video.muted = false\n      }\n    }\n  },\n  components: {\n    'app-select': Select,\n    'app-slick': Slick\n  }\n}\n</script>\n\n<style lang=\"sass\">\n@import '@/sass/_variables.sass'\n.page-product\n  .container-inner\n    // padding-top: 92px\n    // padding-bottom: 70px\n    padding-top: 4.792vw\n    padding-bottom: 3.646vw\n\n.page-product__category\n  // margin-bottom: 42px\n  margin-bottom: 2.188vw\n  font-family: $font-cormorant\n  // font-size: 20px\n  font-size: 1.042vw\n  font-weight: 700\n  line-height: 1\n  // letter-spacing: 3.1px\n  letter-spacing: 0.161vw\n  text-transform: uppercase\n  color: $color-text\n  transition: color 0.3s\n  &:hover\n    color: $color-brown\n    text-decoration: none\n\n.page-product__slider\n  // width: 1160px\n  // height: 560px\n  // margin-bottom: 69px\n  width: 60.417vw\n  height: 29.167vw\n  margin-bottom: 3.594vw\n\n.page-product__slider-sound\n  z-index: 100\n  position: absolute\n  // right: 15px\n  // bottom: 15px\n  // width: 60px\n  // height: 55px\n  // padding: 15px\n  right: 0\n  bottom: 0\n  width: 3.125vw\n  height: 2.865vw\n  padding: 0.781vw\n  &:hover\n    cursor: pointer\n  &::before\n    // font-size: 25px\n    font-size: 1.302vw\n    color: $color-white\n\n.page-product__descr\n  // width: 719px\n  width: 37.448vw\n\n.page-product__subtitle,\n.page-product__text\n  padding-right: 0\n\n.page-product__form\n  // width: 360px\n  width: 18.750vw\n\n.page-product__form-title\n  // margin-bottom: 22px\n  margin-bottom: 1.146vw\n\n.page-product__select-wrapper\n  position: relative\n  // margin-bottom: 19px\n  margin-bottom: 0.990vw\n  &.invalid\n    .select__toggle\n      border: 1px solid red\n\n.page-product__error-text\n  position: absolute\n  top: 100%\n  right: 0\n  width: 100%\n  margin-top: 0\n  margin-bottom: 0\n  font-family: $font-montserrat\n  // font-size: 14px\n  font-size: 0.729vw\n  font-weight: 400\n  line-height: 1\n  color: red\n\n@media(max-width: 1199px)\n  .page-product\n    .container-inner\n      padding-top: calc(92px / #{$lose-m})\n      padding-bottom: calc(70px / #{$lose-m})\n\n  .page-product__category\n    margin-bottom: calc(42px / #{$lose-m})\n    font-size: calc(20px / #{$lose-m})\n    letter-spacing: calc(3.1px / #{$lose-m})\n\n  .page-product__slider\n    width: calc(1160px / #{$lose-m})\n    height: calc(560px / #{$lose-m})\n    margin-bottom: calc(69px / #{$lose-m})\n\n  .page-product__slider-sound\n    width: calc(60px / #{$lose-m})\n    height: calc(55px / #{$lose-m})\n    padding: calc(15px / #{$lose-m})\n    &::before\n      font-size: calc(25px / #{$lose-m})\n\n  .page-product__descr\n    width: calc(719px / #{$lose-m})\n\n  .page-product__form\n    width: calc(360px / #{$lose-m})\n\n  .page-product__form-title\n    margin-bottom: calc(22px / #{$lose-m})\n\n  .page-product__select-wrapper\n    margin-bottom: calc(19px / #{$lose-m} * 1.3)\n\n  .page-product__error-text\n    font-size: calc(14px / #{$lose-m})\n\n@media(max-width: 991px)\n  .page-product\n    .container-inner\n      padding-top: calc(92px / #{$lose-s})\n      padding-bottom: calc(70px / #{$lose-s})\n\n  .page-product__category\n    margin-bottom: calc(42px / #{$lose-s})\n    font-size: calc(20px / #{$lose-s})\n    letter-spacing: calc(3.1px / #{$lose-s})\n\n  .page-product__slider\n    width: calc(1160px / #{$lose-s})\n    height: calc(560px / #{$lose-s})\n    margin-bottom: calc(69px / #{$lose-s})\n\n  .page-product__slider-sound\n    width: calc(60px / #{$lose-s})\n    height: calc(55px / #{$lose-s})\n    padding: calc(15px / #{$lose-s})\n    &::before\n      font-size: calc(25px / #{$lose-s})\n\n  .page-product__descr\n    width: calc(719px / #{$lose-s})\n\n  .page-product__form\n    width: calc(360px / #{$lose-s})\n\n  .page-product__form-title\n    margin-bottom: calc(22px / #{$lose-s})\n\n  .page-product__select-wrapper\n    margin-bottom: calc(19px / #{$lose-s} * 1.3)\n\n  .page-product__error-text\n    font-size: calc(14px / #{$lose-s})\n\n@media(max-width: 767px)\n  .page-product\n    .container-inner\n      padding-top: calc(92px / #{$lose-xs})\n      padding-bottom: calc(70px / #{$lose-xs})\n\n  .page-product__category\n    margin-bottom: calc(42px / #{$lose-xs})\n    font-size: calc(20px / #{$lose-xs})\n    letter-spacing: calc(3.1px / #{$lose-xs})\n\n  .page-product__slider\n    width: calc(1160px / #{$lose-xs})\n    height: calc(560px / #{$lose-xs})\n    margin-bottom: calc(69px / #{$lose-xs})\n\n  .page-product__slider-sound\n    width: calc(60px / #{$lose-xs})\n    height: calc(55px / #{$lose-xs})\n    padding: calc(15px / #{$lose-xs})\n    &::before\n      font-size: calc(25px / #{$lose-xs})\n\n  .page-product__descr\n    width: calc(719px / #{$lose-xs})\n\n  .page-product__form\n    width: calc(360px / #{$lose-xs})\n\n  .page-product__form-title\n    margin-bottom: calc(22px / #{$lose-xs})\n\n  .page-product__select-wrapper\n    margin-bottom: calc(19px / #{$lose-xs} * 1.3)\n\n  .page-product__error-text\n    font-size: calc(14px / #{$lose-xs})\n\n  .page-product__submit\n    width: calc(360px / #{$lose-xs})\n    height: calc(80px / #{$lose-xs})\n    font-size: calc(18px / #{$lose-xs})\n    line-height: calc(80px / #{$lose-xs})\n\n@media(max-width: 575px)\n  .page-product\n    .container-main\n      padding: 0\n    .container-inner\n      padding-top: calc(4.792vw * #{$gain-xs} / 1.5)\n      padding-bottom: calc(3.646vw * #{$gain-xs} / 2)\n      padding-left: 15px\n      padding-right: 15px\n\n  .page-product__category\n    margin-bottom: calc(2.188vw * #{$gain-xs})\n    font-size: calc(1.042vw * #{$gain-xs} * 1.3)\n    letter-spacing: calc(0.161vw * #{$gain-xs})\n\n  .page-product__slider\n    width: calc(100vw - 30px)\n    height: calc((100vw - 30px) * 48.28 / 100)\n    margin-bottom: calc(3.594vw * #{$gain-xs} / 1.5)\n\n  .page-product__slider-sound\n    width: calc(3.125vw * #{$gain-xs} * 1.3)\n    height: calc(2.865vw * #{$gain-xs} * 1.5)\n    padding: calc(0.781vw * #{$gain-xs})\n    &::before\n      font-size: calc(1.302vw * #{$gain-xs} * 1.5)\n\n  .page-product__descr\n    width: 100%\n\n  .page-product__form\n    width: 100%\n    margin-bottom: calc(3.594vw * #{$gain-xs} / 1.5)\n\n  .page-product__form-title\n    margin-bottom: calc(1.146vw * #{$gain-xs} * 1.5)\n\n  .page-product__select-wrapper\n    margin-bottom: calc(0.990vw * #{$gain-xs} * 1.7)\n\n  .page-product__error-text\n    font-size: calc(0.729vw * #{$gain-xs} * 1.5)\n\n  .page-product__submit\n    width: 100%\n    height: calc(4.167vw * #{$gain-xs} * 1.2)\n    font-size: calc(0.938vw * #{$gain-xs} * 1.3)\n    line-height: calc(4.167vw * #{$gain-xs} * 1.2)\n\n</style>\n"]}]}